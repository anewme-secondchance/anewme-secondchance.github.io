<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mindset | A New Me</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #eef2f7;
}

.app-header {
  display: flex;
  align-items: center;
  background: #1f3c88;
  color: white;
  padding: 15px;
}

.back-btn {
  background: white;
  color: #1f3c88;
  border: none;
  padding: 6px 14px;
  border-radius: 20px;
  cursor: pointer;
  margin-right: 15px;
}

.container {
  padding: 20px;
  max-width: 900px;
  margin: auto;
}

.card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

textarea {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-top: 8px;
}

button {
  background: #1f3c88;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 10px;
}
</style>
</head>

<body>

<div class="app-header">
  <button onclick="goBack()" class="back-btn">‚Üê Back</button>
  <div>Mindset</div>
</div>

<div class="container">

<div class="card">
<h3>What went well today?</h3>
<textarea id="r1"></textarea>
</div>

<div class="card">
<h3>What is one step forward I took?</h3>
<textarea id="r2"></textarea>
</div>

<div class="card">
<h3>What can I improve tomorrow?</h3>
<textarea id="r3"></textarea>
</div>

<div class="card">
<h3>üî• Consistency Streak</h3>
<p>Days checked in: <strong id="streakCount">0</strong></p>
<button onclick="updateStreak()">Mark Today Complete</button>
</div>

<div class="card">
<h3>üí™ Sobriety Tracker</h3>
<label>
<input type="checkbox" id="soberCheck">
I stayed sober today
</label>
<p>Days sober: <strong id="soberCount">0</strong></p>
</div>

</div>

<script>

function goBack() {
  window.location.href = "index.html";
}

function saveData() {
  const data = {
    r1: document.getElementById("r1").value,
    r2: document.getElementById("r2").value,
    r3: document.getElementById("r3").value,
    streak: document.getElementById("streakCount").innerText,
    sober: document.getElementById("soberCount").innerText
  };

  localStorage.setItem("mindsetData", JSON.stringify(data));
}

function loadData() {
  const saved = JSON.parse(localStorage.getItem("mindsetData"));
  if (saved) {
    document.getElementById("r1").value = saved.r1 || "";
    document.getElementById("r2").value = saved.r2 || "";
    document.getElementById("r3").value = saved.r3 || "";
    document.getElementById("streakCount").innerText = saved.streak || 0;
    document.getElementById("soberCount").innerText = saved.sober || 0;
  }
}

document.getElementById("r1").addEventListener("input", saveData);
document.getElementById("r2").addEventListener("input", saveData);
document.getElementById("r3").addEventListener("input", saveData);

function updateStreak() {
  let current = parseInt(document.getElementById("streakCount").innerText);
  current++;
  document.getElementById("streakCount").innerText = current;
  saveData();
}

document.getElementById("soberCheck").addEventListener("change", function() {
  if (this.checked) {
    let current = parseInt(document.getElementById("soberCount").innerText);
    current++;
    document.getElementById("soberCount").innerText = current;
    saveData();
    this.checked = false;
  }
});

loadData();

</script>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mindset | A New Me</title>

<style>
body {
  margin: 0;
  font-family: Arial;
  background: #eef2f7;
}

/* LOCK SCREEN */
.lock-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #1f3c88;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: white;
  z-index: 9999;
}

.lock-screen input {
  padding: 10px;
  font-size: 18px;
  width: 120px;
  text-align: center;
  margin-top: 10px;
  border-radius: 6px;
  border: none;
}

.lock-screen button {
  margin-top: 10px;
  padding: 8px 14px;
  border-radius: 6px;
  border: none;
  background: white;
  color: #1f3c88;
  font-weight: bold;
  cursor: pointer;
}

/* HEADER */
.app-header {
  display: flex;
  align-items: center;
  background: #1f3c88;
  color: white;
  padding: 15px;
}

.back-btn {
  background: white;
  color: #1f3c88;
  border: none;
  padding: 6px 14px;
  border-radius: 20px;
  cursor: pointer;
  margin-right: 15px;
}

.container {
  padding: 20px;
  max-width: 900px;
  margin: auto;
}

.card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

textarea {
  width: 100%;
  min-height: 80px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

button {
  background: #1f3c88;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  margin-top: 10px;
}

.save-msg {
  color: green;
  font-size: 14px;
}

a {
  color: #1f3c88;
  font-weight: bold;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}
</style>
</head>

<body>

<!-- PIN LOCK -->
<div class="lock-screen" id="lockScreen">
  <h2 id="lockTitle">Enter PIN</h2>
  <input type="password" maxlength="4" id="pinInput">
  <button onclick="handlePin()">Submit</button>
  <button onclick="resetPin()">Reset PIN</button>
  <p id="pinMessage"></p>
</div>

<div id="appContent" style="display:none;">

<div class="app-header">
  <button onclick="goBack()" class="back-btn">‚Üê Back</button>
  <div>Mindset</div>
</div>

<div class="container">

<!-- DAILY QUOTE -->
<div class="card">
<h3>üåü Daily Encouragement</h3>
<p id="dailyQuote"></p>
<button onclick="newQuote()">New Quote</button>
</div>

<!-- REFLECTIONS -->
<div class="card">
<h3>What went well today?</h3>
<textarea id="reflection1"></textarea>
<div class="save-msg" id="msg1"></div>
</div>

<div class="card">
<h3>What is one step forward I took?</h3>
<textarea id="reflection2"></textarea>
<div class="save-msg" id="msg2"></div>
</div>

<div class="card">
<h3>What can I improve tomorrow?</h3>
<textarea id="reflection3"></textarea>
<div class="save-msg" id="msg3"></div>
</div>

<!-- STREAK -->
<div class="card">
<h3>üî• Consistency Streak</h3>
<p>Days checked in: <strong id="streakCount">0</strong></p>
<button onclick="updateStreak()">Mark Today Complete</button>
</div>

<!-- SOBRIETY -->
<div class="card">
<h3>üí™ Sobriety Tracker</h3>
<label>
<input type="checkbox" id="soberCheck"> I stayed sober today
</label>
<p>Days sober: <strong id="soberCount">0</strong></p>
</div>

<!-- COUNSELING & SUPPORT -->
<div class="card">
<h3>üß† Counseling & Mental Health Support</h3>

<p><strong>988 Crisis Lifeline (Nationwide)</strong></p>
<p>Call or Text: 988</p>
<a href="https://988lifeline.org/" target="_blank">988lifeline.org</a>

<br><br>

<p><strong>Find Local Counseling by ZIP Code</strong></p>
<a href="https://www.findhelp.org/" target="_blank">FindHelp.org</a>

<br><br>

<p><strong>SAMHSA Treatment Locator</strong></p>
<a href="https://www.samhsa.gov/find-treatment" target="_blank">
SAMHSA Treatment Finder
</a>

<br><br>

<p><strong>Open Path Affordable Therapy</strong></p>
<a href="https://openpathcollective.org/" target="_blank">
OpenPathCollective.org
</a>

</div>

<div class="card">
<h3>ü§ù Support Groups</h3>

<p><strong>Alcoholics Anonymous (AA)</strong></p>
<a href="https://www.aa.org/find-aa" target="_blank">
Find AA Meetings
</a>

<br><br>

<p><strong>Narcotics Anonymous (NA)</strong></p>
<a href="https://www.na.org/meetingsearch/" target="_blank">
Find NA Meetings
</a>

<br><br>

<p><strong>Celebrate Recovery</strong></p>
<a href="https://www.celebraterecovery.com/crgroups" target="_blank">
Find Celebrate Recovery Groups
</a>

<br><br>

<p><strong>Peer Reentry Support Programs</strong></p>
<a href="https://www.findhelp.org/" target="_blank">
Search Reentry Peer Support
</a>

</div>

</div>
</div>

<script>
function goBack() {
  window.location.href = "index.html";
}

/* PIN */
function handlePin() {
  const input = document.getElementById("pinInput").value;
  const storedPin = localStorage.getItem("mindset_pin");
  const message = document.getElementById("pinMessage");

  if (!storedPin) {
    if (input.length === 4) {
      localStorage.setItem("mindset_pin", input);
      unlockApp();
    } else {
      message.textContent = "Create a 4-digit PIN";
    }
  } else {
    if (input === storedPin) {
      unlockApp();
    } else {
      message.textContent = "Incorrect PIN";
    }
  }
}

function unlockApp() {
  document.getElementById("lockScreen").style.display = "none";
  document.getElementById("appContent").style.display = "block";
}

function resetPin() {
  localStorage.removeItem("mindset_pin");
  document.getElementById("pinMessage").textContent = "PIN Reset. Create new PIN.";
}

window.onload = function() {
  const storedPin = localStorage.getItem("mindset_pin");
  if (!storedPin) {
    document.getElementById("lockTitle").textContent = "Create a 4-Digit PIN";
  }
  newQuote();
};

/* QUOTES */
const quotes = [
"You are not your past. You are your next decision.",
"Small steps every day build a new life.",
"Consistency creates stability.",
"Progress, not perfection.",
"You survived. Now rebuild."
];

function newQuote() {
  const random = quotes[Math.floor(Math.random() * quotes.length)];
  document.getElementById("dailyQuote").textContent = random;
}

/* REFLECTION SAVE */
function setupReflection(id, msgId, key) {
  const field = document.getElementById(id);
  const saved = localStorage.getItem(key);
  if (saved) field.value = saved;
  field.addEventListener("input", () => {
    localStorage.setItem(key, field.value);
    document.getElementById(msgId).textContent = "Saved ‚úì";
  });
}

setupReflection("reflection1","msg1","daily1");
setupReflection("reflection2","msg2","daily2");
setupReflection("reflection3","msg3","daily3");

/* STREAK */
function updateStreak() {
  let streak = localStorage.getItem("streak");
  streak = streak ? parseInt(streak) + 1 : 1;
  localStorage.setItem("streak", streak);
  document.getElementById("streakCount").textContent = streak;
}

const savedStreak = localStorage.getItem("streak");
if (savedStreak) document.getElementById("streakCount").textContent = savedStreak;

/* SOBRIETY */
const soberCheck = document.getElementById("soberCheck");
let soberCount = localStorage.getItem("soberCount");

if (soberCount) document.getElementById("soberCount").textContent = soberCount;

soberCheck.addEventListener("change", function() {
  if (this.checked) {
    soberCount = soberCount ? parseInt(soberCount) + 1 : 1;
    localStorage.setItem("soberCount", soberCount);
    document.getElementById("soberCount").textContent = soberCount;
  }
});
</script>

</body>
</html>

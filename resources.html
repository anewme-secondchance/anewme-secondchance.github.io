<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resource Directory | A New Me</title>

<style>
body { margin:0; font-family:Arial; background:#eef2f7; }

.header {
  background:#1f3c88;
  color:white;
  padding:20px;
  display:flex;
  align-items:center;
}

.back-btn {
  background:white;
  color:#1f3c88;
  border:none;
  padding:6px 14px;
  border-radius:20px;
  cursor:pointer;
  margin-right:15px;
  font-weight:bold;
}

.container { padding:20px; max-width:1000px; margin:auto; }

.card {
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:12px;
  box-shadow:0 3px 8px rgba(0,0,0,0.08);
}

.save-btn {
  background:#ff914d;
  border:none;
  padding:6px 10px;
  border-radius:5px;
  cursor:pointer;
  color:white;
  margin-top:8px;
}

input, select {
  padding:8px;
  margin-bottom:8px;
  width:100%;
  max-width:400px;
}
</style>
</head>

<body>

<div class="header">
  <button onclick="goBack()" class="back-btn">â† Back</button>
  <h2>Texas Reentry Resource Directory</h2>
</div>

<div class="container">

<!-- EMERGENCY QUICK HELP -->
<div class="card" style="background:#fff3cd; border-left:6px solid #ff914d;">
  <strong>ğŸš¨ Emergency Quick Help</strong><br><br>

  ğŸ“ <strong>911</strong> â€“ Immediate danger or medical emergency<br><br>

  ğŸ§  <strong>988</strong> â€“ Mental Health Crisis & Suicide Lifeline<br>
  <a href="tel:988">Call 988</a><br><br>

  ğŸ“² <strong>211 Texas</strong> â€“ Housing, food, transportation, utilities, shelter<br>
  <a href="tel:211">Call 211</a> |
  <a href="https://www.211texas.org" target="_blank">211Texas.org</a>

  <br><br>
  <em>If you are in crisis, do not wait. Call immediately.</em>
</div>

<input type="text" id="searchInput" placeholder="Search by name..." onkeyup="renderResources()">

<select id="cityFilter" onchange="renderResources()">
<option value="">All Cities</option>
<option>Tyler</option>
<option>Dallas</option>
<option>Houston</option>
<option>Statewide</option>
</select>

<select id="categoryFilter" onchange="renderResources()">
<option value="">All Categories</option>
<option>Housing</option>
<option>Employment</option>
<option>Health</option>
<option>Legal</option>
<option>Transportation</option>
<option>ID Recovery</option>
<option>Multi-Service</option>
</select>

<h3>Saved Resources</h3>
<div id="savedList"></div>

<h3>All Resources</h3>
<div id="resourceList"></div>

</div>

<script>

function goBack() {
  window.location.href = "index.html";
}

/* RESOURCE DATA */
const resources = [

  {
    name: "Bethesda Health Clinic",
    city: "Tyler",
    category: "Health",
    phone: "903-596-8353",
    website: "https://www.bethesdaclinic.org",
    notes: "Free and low-cost medical and dental care for uninsured residents."
  },

  {
    name: "ETBU Counseling Center",
    city: "Tyler",
    category: "Health",
    phone: "903-923-2360",
    website: "",
    notes: "Call Marshall office and request transfer to Tyler Counseling Center. Email: counseling@etbu.edu"
  },

  {
    name: "Salvation Army",
    city: "Tyler",
    category: "Housing",
    phone: "903-592-4361",
    website: "https://www.salvationarmyusa.org",
    notes: "Emergency shelter and rental assistance."
  },

  {
    name: "Texas Workforce Commission",
    city: "Statewide",
    category: "Employment",
    phone: "800-939-6631",
    website: "https://www.twc.texas.gov",
    notes: "Job search support and reentry employment assistance."
  },

  {
    name: "211 Texas",
    city: "Statewide",
    category: "Multi-Service",
    phone: "211",
    website: "https://www.211texas.org",
    notes: "Housing, food, transportation, utilities, mental health, emergency assistance."
  },

  {
    name: "TDCJ Reentry & Integration Division (RRD)",
    city: "Statewide",
    category: "ID Recovery",
    phone: "",
    website: "https://www.tdcj.texas.gov/divisions/rrd/index.html",
    notes: "Official reentry services including ID help and transition planning."
  },

  {
    name: "Texas DPS - Driver License Offices",
    city: "Statewide",
    category: "ID Recovery",
    phone: "",
    website: "https://www.dps.texas.gov/section/driver-license/driver-license-office-locations",
    notes: "Apply for state ID or driver license. Request temporary paper ID."
  },

  {
    name: "Local Public Transportation",
    city: "Tyler",
    category: "Transportation",
    phone: "",
    website: "",
    notes: "Check your city's public transit system for reduced fares and work transport assistance."
  }

];

/* Render Resources */
function renderResources() {
  const search = document.getElementById("searchInput").value.toLowerCase();
  const city = document.getElementById("cityFilter").value;
  const category = document.getElementById("categoryFilter").value;

  const list = document.getElementById("resourceList");
  list.innerHTML = "";

  resources.forEach(resource => {
    if (
      resource.name.toLowerCase().includes(search) &&
      (city === "" || resource.city === city) &&
      (category === "" || resource.category === category)
    ) {
      list.innerHTML += `
        <div class="card">
          <strong>${resource.name}</strong><br>
          ${resource.city} â€“ ${resource.category}<br>
          ${resource.phone ? `ğŸ“ <a href="tel:${resource.phone}">${resource.phone}</a><br>` : ""}
          ${resource.website ? `ğŸŒ <a href="${resource.website}" target="_blank">Website</a><br>` : ""}
          ${resource.notes ? `<em>${resource.notes}</em><br>` : ""}
          <button class="save-btn" onclick='saveResource(${JSON.stringify(resource)})'>Save</button>
        </div>
      `;
    }
  });
}

/* Save Resource */
function saveResource(resource) {
  let saved = JSON.parse(localStorage.getItem("savedResources")) || [];
  saved.push(resource);
  localStorage.setItem("savedResources", JSON.stringify(saved));
  renderSaved();
}

/* Render Saved */
function renderSaved() {
  const savedList = document.getElementById("savedList");
  savedList.innerHTML = "";
  let saved = JSON.parse(localStorage.getItem("savedResources")) || [];

  saved.forEach(resource => {
    savedList.innerHTML += `
      <div class="card">
        <strong>${resource.name}</strong><br>
        ${resource.city} â€“ ${resource.category}
      </div>
    `;
  });
}

renderResources();
renderSaved();

</script>

</body>
</html>

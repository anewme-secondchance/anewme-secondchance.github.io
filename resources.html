<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resource Directory | A New Me</title>

<style>
body { margin:0; font-family:Arial; background:#eef2f7; }
.header { background:#1f3c88; color:white; padding:25px; text-align:center; }
.container { padding:20px; max-width:1000px; margin:auto; }
.card { background:white; padding:15px; border-radius:10px; margin-bottom:12px; box-shadow:0 3px 8px rgba(0,0,0,0.08); }
.button { background:#1f3c88; color:white; padding:8px 12px; border-radius:6px; text-decoration:none; display:inline-block; margin-top:5px; }
.save-btn { background:#ff914d; border:none; padding:6px 10px; border-radius:5px; cursor:pointer; color:white; margin-top:8px; }
input, select { padding:8px; margin-right:8px; margin-bottom:10px; }
</style>
</head>

<body>

<div class="header">
<h1>Texas Reentry Resource Directory</h1>
</div>

<div class="container">

<a href="index.html" class="button">‚Üê Back to Home</a>

<br><br>

<input type="text" id="searchInput" placeholder="Search by name..." onkeyup="renderResources()">

<select id="cityFilter" onchange="renderResources()">
<option value="">All Cities</option>
<option>Tyler</option>
<option>Dallas</option>
<option>Fort Worth</option>
<option>Houston</option>
<option>San Antonio</option>
<option>Austin</option>
</select>

<select id="categoryFilter" onchange="renderResources()">
<option value="">All Categories</option>
<option>Housing</option>
<option>Employment</option>
<option>Health</option>
</select>

<h3>Saved Resources</h3>
<div id="savedList"></div>

<h3>All Resources</h3>
<div id="resourceList"></div>

</div>

<script src="resources-data.js"></script>

<script>
function renderResources() {
  const search = document.getElementById("searchInput").value.toLowerCase();
  const city = document.getElementById("cityFilter").value;
  const category = document.getElementById("categoryFilter").value;

  const list = document.getElementById("resourceList");
  list.innerHTML = "";

  resources.forEach(resource => {
    if (
      (resource.name.toLowerCase().includes(search)) &&
      (city === "" || resource.city === city) &&
      (category === "" || resource.category === category)
    ) {
      list.innerHTML += createCard(resource);
    }
  });
}

function createCard(resource) {
  return `
    <div class="card">
      <strong>${resource.name}</strong><br>
      ${resource.city} ‚Äì ${resource.category}<br>
      ${resource.phone ? `üìû <a href="tel:${resource.phone}">${resource.phone}</a><br>` : ""}
      üåê <a href="${resource.website}" target="_blank">Website</a><br>
      <button class="save-btn" onclick='saveResource(${JSON.stringify(resource)})'>Save</button>
    </div>
  `;
}

function saveResource(resource) {
  let saved = JSON.parse(localStorage.getItem("savedResources")) || [];
  saved.push(resource);
  localStorage.setItem("savedResources", JSON.stringify(saved));
  renderSaved();
}

function renderSaved() {
  const savedList = document.getElementById("savedList");
  savedList.innerHTML = "";
  let saved = JSON.parse(localStorage.getItem("savedResources")) || [];

  saved.forEach(resource => {
    savedList.innerHTML += `
      <div class="card">
        <strong>${resource.name}</strong><br>
        ${resource.city} ‚Äì ${resource.category}
      </div>
    `;
  });
}

renderResources();
renderSaved();
</script>

</body>
</html>
